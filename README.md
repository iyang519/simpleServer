# 使用node实现简易的web服务器
## 使用node实现功能：
1.读取本地文件
2.设置路由
3.在浏览器端显示本地文件内容

##此外，也尝试使用express框架。


##对express的认知：
expressjs是在nodejs的TCP 监听器上封装了一层管道处理机制。他可以把nodejs收到请求到响应之间的全过程暴露出来，该管道通过.use(path,fun)方法一节一节添加组成。

##服务器架构设计：
###web 服务器端的 工作流程 ：（资料查阅）

（1）客户端发送请求

客户端（通过浏览器） 和Web服务器建立TCP连接，连接建立以后，向Web服务器发出访问请求（如get）。根据HTTP协议，该请求中包含了客户端的IP地址、浏览器的类型和请求的URL等一系列信息。

（2）服务器解析请求

Web服务器对请求按照HTTP协议进行解码来确定进一步的动作，设计的内容有三鼐要点：方法（GET）、文档(/sample.html)、和浏览器使用的协议（HTTP/1.1）其中方法告诉服务器应完动的动作，GET方法的含义很明显是：服务器应定位、读取文件并将它返回给客户。

Web服务器软件现在就知道了，它应该找到文件/sample.html，并使用HTTP/1.1协议将内存返回给客户。信息是经过与请求到来相同的连接发出的，所以服务器不需要定们客户或创建新的连接。

（3）读取其它信息（非必须步骤）

  Web服务器根据需要去读取请求的其它部分。在HTTP/1.1下，客户还应给服务器提供关于它的一些信息。元信息（metainformation）可用来描述浏览器及其能力，以使服务器能据此确定如何返回应答。

（4）完成请求的动作

若现在没有错误出现， WWW服务器将执行请求所要求的动作。要获取（GET）一个文档，web服务器在其文档树中搜索请求的文件（/sample.html）。这是由服务器机器上作为操作系统一部分的文件系统完成的。若文件能找到并可正常读取，则服务器将把它返回给客户。
如果成功：文件被发送出去。

首先，web服务器发送一个状态码及一些描述信息。既然文件已经找到，则发送状态码200，表示一切都OK ，文档随后发出，因为发送的信息是HTML文档，所以Content-type 取值为text/html。文档长为1024个字节，所以Content-type 取1024 。服务器软件的标识及文件的时间属性信息也被包含在头域中。

如果失败：返回错误指示。

如果请求的文件没有找到或找到但无法读取，测请求无法满足。这时将返回不同于200的状态码。最常见的问题是请求中的文件名拼写有误，所以服务器无法找到该文件。这种情况下，服务器将发送一个状态码---404 给客户。

（5）关闭文件和网络连接，结束会话。

当文件已被发邮或错误已发出后， web服务器结束整个会话。它关闭打开的的被请求文件，关闭网络端口从而结束网络连接。有关的其它工作则是由客户端来完成的，包括接收数据，并以用户可读的方式呈现出来。这些与服务器无关











